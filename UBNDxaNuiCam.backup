--
-- PostgreSQL database dump
--

\restrict g3uQ2MaPLUItiyCc8jEHpG4xouUMCiB1DsC68rrhll1qhKZyRTDKgR02LYEOEXc

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

-- Started on 2025-08-30 16:31:52

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 5009 (class 1262 OID 16387)
-- Name: ubndxanuicam; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE ubndxanuicam WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'Vietnamese_Vietnam.1252';


ALTER DATABASE ubndxanuicam OWNER TO postgres;

\unrestrict g3uQ2MaPLUItiyCc8jEHpG4xouUMCiB1DsC68rrhll1qhKZyRTDKgR02LYEOEXc
\connect ubndxanuicam
\restrict g3uQ2MaPLUItiyCc8jEHpG4xouUMCiB1DsC68rrhll1qhKZyRTDKgR02LYEOEXc

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 222 (class 1259 OID 16590)
-- Name: departments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.departments (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    avatar character varying(255)
);


ALTER TABLE public.departments OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16589)
-- Name: departments_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.departments_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.departments_id_seq OWNER TO postgres;

--
-- TOC entry 5010 (class 0 OID 0)
-- Dependencies: 221
-- Name: departments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.departments_id_seq OWNED BY public.departments.id;


--
-- TOC entry 226 (class 1259 OID 16628)
-- Name: permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.permissions (
    id integer NOT NULL,
    permission_name character varying(100) NOT NULL,
    description text
);


ALTER TABLE public.permissions OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16627)
-- Name: permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.permissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.permissions_id_seq OWNER TO postgres;

--
-- TOC entry 5011 (class 0 OID 0)
-- Dependencies: 225
-- Name: permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.permissions_id_seq OWNED BY public.permissions.id;


--
-- TOC entry 227 (class 1259 OID 16638)
-- Name: role_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.role_permissions (
    role_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.role_permissions OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16578)
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    role_name character varying(50) NOT NULL,
    description text,
    color character varying(7) DEFAULT '#64748b'::character varying,
    level integer NOT NULL
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16577)
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.roles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.roles_id_seq OWNER TO postgres;

--
-- TOC entry 5012 (class 0 OID 0)
-- Dependencies: 219
-- Name: roles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.roles_id_seq OWNED BY public.roles.id;


--
-- TOC entry 233 (class 1259 OID 16710)
-- Name: system_settings; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.system_settings (
    key character varying(50) NOT NULL,
    value jsonb,
    description text,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.system_settings OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16676)
-- Name: task_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.task_history (
    id integer NOT NULL,
    task_id integer,
    user_id integer,
    action character varying(255) NOT NULL,
    details text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.task_history OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 16675)
-- Name: task_history_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.task_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.task_history_id_seq OWNER TO postgres;

--
-- TOC entry 5013 (class 0 OID 0)
-- Dependencies: 230
-- Name: task_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.task_history_id_seq OWNED BY public.task_history.id;


--
-- TOC entry 232 (class 1259 OID 16695)
-- Name: task_supporters; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.task_supporters (
    task_id integer NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE public.task_supporters OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16654)
-- Name: tasks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tasks (
    id integer NOT NULL,
    title character varying(255) NOT NULL,
    description text,
    creator_id integer,
    assignee_id integer,
    due_date timestamp with time zone,
    status character varying(50) DEFAULT 'Mới tạo'::character varying,
    priority character varying(50) DEFAULT 'Trung bình'::character varying,
    created_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone
);


ALTER TABLE public.tasks OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 16653)
-- Name: tasks_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tasks_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tasks_id_seq OWNER TO postgres;

--
-- TOC entry 5014 (class 0 OID 0)
-- Dependencies: 228
-- Name: tasks_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tasks_id_seq OWNED BY public.tasks.id;


--
-- TOC entry 218 (class 1259 OID 16418)
-- Name: user_logs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_logs (
    id integer NOT NULL,
    user_id integer NOT NULL,
    actor_id integer NOT NULL,
    action text NOT NULL,
    details jsonb,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.user_logs OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16417)
-- Name: user_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.user_logs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.user_logs_id_seq OWNER TO postgres;

--
-- TOC entry 5015 (class 0 OID 0)
-- Dependencies: 217
-- Name: user_logs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.user_logs_id_seq OWNED BY public.user_logs.id;


--
-- TOC entry 224 (class 1259 OID 16601)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    username character varying(50),
    cccd character varying(12) NOT NULL,
    password_hash character varying(255) NOT NULL,
    full_name character varying(100) NOT NULL,
    birth_date date,
    phone_number character varying(15),
    email character varying(255),
    avatar character varying(255),
    role_id integer,
    department_id integer,
    is_active boolean DEFAULT true,
    note text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16600)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.users_id_seq OWNER TO postgres;

--
-- TOC entry 5016 (class 0 OID 0)
-- Dependencies: 223
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;


--
-- TOC entry 4788 (class 2604 OID 16593)
-- Name: departments id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.departments ALTER COLUMN id SET DEFAULT nextval('public.departments_id_seq'::regclass);


--
-- TOC entry 4792 (class 2604 OID 16631)
-- Name: permissions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions ALTER COLUMN id SET DEFAULT nextval('public.permissions_id_seq'::regclass);


--
-- TOC entry 4786 (class 2604 OID 16581)
-- Name: roles id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles ALTER COLUMN id SET DEFAULT nextval('public.roles_id_seq'::regclass);


--
-- TOC entry 4797 (class 2604 OID 16679)
-- Name: task_history id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_history ALTER COLUMN id SET DEFAULT nextval('public.task_history_id_seq'::regclass);


--
-- TOC entry 4793 (class 2604 OID 16657)
-- Name: tasks id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks ALTER COLUMN id SET DEFAULT nextval('public.tasks_id_seq'::regclass);


--
-- TOC entry 4784 (class 2604 OID 16421)
-- Name: user_logs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_logs ALTER COLUMN id SET DEFAULT nextval('public.user_logs_id_seq'::regclass);


--
-- TOC entry 4789 (class 2604 OID 16604)
-- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);


--
-- TOC entry 4992 (class 0 OID 16590)
-- Dependencies: 222
-- Data for Name: departments; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.departments VALUES (8, 'Phòng Quản trị (ADMIN)', 'Quản trị hệ thống', NULL);
INSERT INTO public.departments VALUES (6, 'Ban ấp An Hòa', 'Ban ấp An Hòa, xã Núi Cấm', NULL);
INSERT INTO public.departments VALUES (5, 'Trung tâm Dịch vụ tổng hợp', 'Thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm', NULL);
INSERT INTO public.departments VALUES (2, 'Phòng Kinh tế', 'Lĩnh vực chính: Tài chính - Kế toán.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm', NULL);
INSERT INTO public.departments VALUES (3, 'Phòng Văn hóa - Xã hội', 'Lĩnh vực chính: Tham mưu, quản lý lĩnh vực Văn hóa và Xã hội.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm.', NULL);
INSERT INTO public.departments VALUES (10, 'Tổ giúp việc "Khắc phục mưa bão"', 'Lĩnh vực chính: Khắc phục mưa bão.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm.', NULL);
INSERT INTO public.departments VALUES (4, 'Trung tâm Phục vụ Hành chính công', 'Lĩnh vực chính: Một cửa, thực hiện thủ tục tiếp công dân.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm.', NULL);
INSERT INTO public.departments VALUES (11, 'UBND xã Núi Cấm', 'Lĩnh vực chính: Quản lý và Điều hành công tác tại địa phương.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND tỉnh An Giang.', NULL);
INSERT INTO public.departments VALUES (1, 'Văn phòng HĐND và UBND', 'Lĩnh vực chính: Tham mưu và Đề xuất.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm.', NULL);
INSERT INTO public.departments VALUES (7, 'Trường THCS Nguyễn Bỉnh Khiêm', 'Lĩnh vực chính: Giáo dục và Đào tạo.
Được thành lập theo QĐ số: .../QĐ-UBND, ngày 01/07/2025 của UBND xã Núi Cấm.', NULL);
INSERT INTO public.departments VALUES (9, 'Trường học', '', NULL);


--
-- TOC entry 4996 (class 0 OID 16628)
-- Dependencies: 226
-- Data for Name: permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.permissions VALUES (1, 'full_access', 'Toàn quyền truy cập hệ thống');
INSERT INTO public.permissions VALUES (2, 'user_management', 'Quyền quản lý người dùng (tạo, sửa, xóa, khóa)');
INSERT INTO public.permissions VALUES (3, 'department_management', 'Quyền quản lý phòng ban');
INSERT INTO public.permissions VALUES (4, 'role_management', 'Quyền quản lý phân quyền và vai trò');
INSERT INTO public.permissions VALUES (5, 'create_task', 'Quyền giao việc cho người khác');
INSERT INTO public.permissions VALUES (6, 'edit_delete_task', 'Quyền chỉnh sửa, xóa công việc của người khác');
INSERT INTO public.permissions VALUES (7, 'approve_task', 'Quyền duyệt và yêu cầu làm lại công việc');
INSERT INTO public.permissions VALUES (8, 'view_reports', 'Quyền xem báo cáo và thống kê toàn diện');
INSERT INTO public.permissions VALUES (9, 'view_audit_log', 'Quyền xem nhật ký hệ thống');
INSERT INTO public.permissions VALUES (10, 'system_settings', 'Quyền truy cập cài đặt hệ thống (bảo trì, thông báo đẩy,...)');


--
-- TOC entry 4997 (class 0 OID 16638)
-- Dependencies: 227
-- Data for Name: role_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.role_permissions VALUES (1, 1);
INSERT INTO public.role_permissions VALUES (2, 1);
INSERT INTO public.role_permissions VALUES (3, 1);
INSERT INTO public.role_permissions VALUES (4, 1);
INSERT INTO public.role_permissions VALUES (4, 2);
INSERT INTO public.role_permissions VALUES (4, 3);
INSERT INTO public.role_permissions VALUES (4, 4);
INSERT INTO public.role_permissions VALUES (4, 5);
INSERT INTO public.role_permissions VALUES (4, 6);
INSERT INTO public.role_permissions VALUES (4, 7);
INSERT INTO public.role_permissions VALUES (4, 8);
INSERT INTO public.role_permissions VALUES (4, 9);
INSERT INTO public.role_permissions VALUES (4, 10);


--
-- TOC entry 4990 (class 0 OID 16578)
-- Dependencies: 220
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.roles VALUES (1, 'Admin', 'Quản trị viên hệ thống, có toàn quyền', '#ef4444', 1);
INSERT INTO public.roles VALUES (2, 'Tài khoản thử nghiệm', 'Quyền quản lý cao nhất, tương đương Admin', '#f97316', 1);
INSERT INTO public.roles VALUES (3, 'Chủ tịch', 'Quyền quản lý cao nhất, tương đương Admin', '#f97316', 1);
INSERT INTO public.roles VALUES (4, 'Lãnh đạo', 'Quản lý cấp dưới, giao việc', '#eab308', 1);
INSERT INTO public.roles VALUES (5, 'Cán bộ', 'Nhận việc và quản lý nhân viên cấp dưới', '#84cc16', 2);
INSERT INTO public.roles VALUES (6, 'Chuyên viên', 'Thực hiện công việc', '#22c55e', 2);
INSERT INTO public.roles VALUES (7, 'Viên chức', 'Tương đương Chuyên viên', '#14b8a6', 2);
INSERT INTO public.roles VALUES (8, 'Người hỗ trợ', 'Thực hiện công việc được giao hoặc hỗ trợ', '#0ea5e9', 3);
INSERT INTO public.roles VALUES (9, 'Tổ trưởng/Trưởng ban', 'Quản lý công việc trong tổ/ban', '#6366f1', 3);
INSERT INTO public.roles VALUES (10, 'Trưởng ấp', 'Vai trò hỗ trợ tại các ấp', '#a855f7', 3);
INSERT INTO public.roles VALUES (11, 'Trường học', 'Vai trò hỗ trợ tại các trường học', '#d946ef', 3);


--
-- TOC entry 5003 (class 0 OID 16710)
-- Dependencies: 233
-- Data for Name: system_settings; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.system_settings VALUES ('maintenance_mode', '{"title": "Hệ thống đang bảo trì", "enabled": false, "message": "Chúng tôi sẽ sớm quay trở lại. Vui lòng quay lại sau!"}', 'Cấu hình chế độ bảo trì cho toàn bộ trang web.', '2025-08-28 17:52:36.590875+07');


--
-- TOC entry 5001 (class 0 OID 16676)
-- Dependencies: 231
-- Data for Name: task_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.task_history VALUES (1, 1, 1, 'Tạo mới', 'Giao việc cho Văn phòng HĐND và UBND', '2025-08-28 17:53:16.857345+07');
INSERT INTO public.task_history VALUES (2, 2, 1, 'Tạo mới', 'Giao việc cho Trường THCS Nguyễn Bỉnh Khiêm', '2025-08-28 21:35:09.331891+07');
INSERT INTO public.task_history VALUES (3, 3, 1, 'Tạo mới', 'Giao việc cho Trung tâm Dịch vụ tổng hợp', '2025-08-28 21:35:27.921746+07');
INSERT INTO public.task_history VALUES (4, 4, 6, 'Tạo mới', 'Giao việc cho Trung tâm Dịch vụ tổng hợp', '2025-08-28 21:36:29.207445+07');
INSERT INTO public.task_history VALUES (5, 5, 6, 'Tạo mới', 'Giao việc cho Trung tâm PVHCC', '2025-08-28 21:37:01.232164+07');
INSERT INTO public.task_history VALUES (6, 6, 9, 'Tạo mới', 'Giao việc cho Văn phòng HĐND và UBND', '2025-08-28 21:37:42.100793+07');
INSERT INTO public.task_history VALUES (7, 7, 1, 'Tạo mới', 'Giao việc cho Văn phòng HĐND', '2025-08-29 14:20:23.685006+07');
INSERT INTO public.task_history VALUES (8, 7, 12, 'Cập nhật trạng thái', 'Văn phòng HĐND đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:11:30.795264+07');
INSERT INTO public.task_history VALUES (9, 7, 12, 'Cập nhật trạng thái', 'Văn phòng HĐND đã cập nhật trạng thái thành "Đang thực hiện"', '2025-08-29 15:11:43.996344+07');
INSERT INTO public.task_history VALUES (10, 7, 12, 'Cập nhật trạng thái', 'Văn phòng HĐND đã cập nhật trạng thái thành "Chờ duyệt"', '2025-08-29 15:12:13.925172+07');
INSERT INTO public.task_history VALUES (11, 7, 12, 'Cập nhật trạng thái', 'Văn phòng HĐND đã cập nhật trạng thái thành "Hoàn thành"', '2025-08-29 15:12:17.543465+07');
INSERT INTO public.task_history VALUES (12, 5, 7, 'Cập nhật trạng thái', 'Trung tâm PVHCC đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:13:10.928187+07');
INSERT INTO public.task_history VALUES (13, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:13:36.659963+07');
INSERT INTO public.task_history VALUES (14, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:13:39.534095+07');
INSERT INTO public.task_history VALUES (15, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Đang thực hiện"', '2025-08-29 15:13:43.71651+07');
INSERT INTO public.task_history VALUES (16, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Đang thực hiện"', '2025-08-29 15:13:46.720798+07');
INSERT INTO public.task_history VALUES (17, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Chờ duyệt"', '2025-08-29 15:13:54.793983+07');
INSERT INTO public.task_history VALUES (18, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã yêu cầu làm lại công việc.', '2025-08-29 15:13:58.565564+07');
INSERT INTO public.task_history VALUES (19, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:14:03.558929+07');
INSERT INTO public.task_history VALUES (20, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Đang thực hiện"', '2025-08-29 15:14:10.194769+07');
INSERT INTO public.task_history VALUES (21, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Chờ duyệt"', '2025-08-29 15:14:12.500452+07');
INSERT INTO public.task_history VALUES (22, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã yêu cầu làm lại công việc.', '2025-08-29 15:14:42.782673+07');
INSERT INTO public.task_history VALUES (23, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Tiếp nhận"', '2025-08-29 15:14:47.90015+07');
INSERT INTO public.task_history VALUES (24, 3, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Đang thực hiện"', '2025-08-29 15:14:50.446343+07');
INSERT INTO public.task_history VALUES (25, 4, 8, 'Cập nhật trạng thái', 'Trung tâm Dịch vụ tổng hợp đã cập nhật trạng thái thành "Chờ duyệt"', '2025-08-29 15:14:52.960228+07');


--
-- TOC entry 5002 (class 0 OID 16695)
-- Dependencies: 232
-- Data for Name: task_supporters; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 4999 (class 0 OID 16654)
-- Dependencies: 229
-- Data for Name: tasks; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.tasks VALUES (1, 'Ký số', '', 1, 2, '2025-08-29 07:00:00+07', 'Mới tạo', 'Cao', '2025-08-28 17:53:16.847155+07', NULL);
INSERT INTO public.tasks VALUES (2, 'Khai giảng', '', 1, 5, '2025-09-09 07:00:00+07', 'Mới tạo', 'Trung bình', '2025-08-28 21:35:09.325781+07', NULL);
INSERT INTO public.tasks VALUES (6, 'Tiếp nhận CV 01', '', 9, 2, '2025-08-29 07:00:00+07', 'Mới tạo', 'Cao', '2025-08-28 21:37:42.094693+07', NULL);
INSERT INTO public.tasks VALUES (7, 'Tiếp xúc cử tri', '', 1, 12, '2025-08-28 07:00:00+07', 'Hoàn thành', 'Trung bình', '2025-08-29 14:20:23.657359+07', '2025-08-29 15:12:17.539744+07');
INSERT INTO public.tasks VALUES (5, 'Tiếp nhận hồ sơ ngày 29/8/2025', '', 6, 7, '2025-08-29 07:00:00+07', 'Tiếp nhận', 'Trung bình', '2025-08-28 21:37:01.225791+07', NULL);
INSERT INTO public.tasks VALUES (3, 'Tiếp công dân 29/8/2025', '', 1, 8, '2025-09-09 07:00:00+07', 'Đang thực hiện', 'Cao', '2025-08-28 21:35:27.914644+07', NULL);
INSERT INTO public.tasks VALUES (4, 'Phát thanh ngày 29/8/2025', '', 6, 8, '2025-08-29 07:00:00+07', 'Chờ duyệt', 'Thấp', '2025-08-28 21:36:29.197919+07', NULL);


--
-- TOC entry 4988 (class 0 OID 16418)
-- Dependencies: 218
-- Data for Name: user_logs; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 4994 (class 0 OID 16601)
-- Dependencies: 224
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.users VALUES (3, 'phongkinhte', '000000000003', '$2a$10$2S2EpEvOToqm.ulVWhou2OGIlaZtMG0pHE9GIF449kpEUd9dWOP0G', 'Phòng Kinh tế', '1989-07-05', '0365456987', 'phongkinhte@nuicam.com', NULL, 2, 2, true, '', '2025-08-28 17:46:46.457626+07');
INSERT INTO public.users VALUES (5, 'thcsnguyenbinhkhiem', '000000032165', '$2a$10$cl/HJ3cq5Jb4vsDX7aU/D.Of0YMr3F9ZCRjgRg2fIlex7uomilKPi', 'Trường THCS Nguyễn Bỉnh Khiêm', NULL, NULL, NULL, NULL, 1, NULL, true, '', '2025-08-28 21:22:35.249549+07');
INSERT INTO public.users VALUES (12, 'vanphonghdnd', '065123332123', '$2a$10$Uh.gKbgl4qsVTMwkjusjyeNkAMKFoYhjifC1M.mwhxk8xvDxpnwAK', 'Văn phòng HĐND', NULL, NULL, NULL, NULL, 2, 1, true, 'Văn phòng HĐND', '2025-08-28 21:40:34.813046+07');
INSERT INTO public.users VALUES (13, 'lanhdao', '093748235943', '$2a$10$XD0UIm8GxfA6DuZUMSHdZ.8UCRKomYc7322AKevMf9bjFUj1vZaSy', 'Lãnh đạo (TEST)', '1980-06-04', '0354849821', 'lanhdao@nuicam.com', NULL, 4, 11, true, 'Lãnh đạo (TEST)', '2025-08-29 15:16:30.871735+07');
INSERT INTO public.users VALUES (9, 'phongvanhoaxahoi', '038423947239', '$2a$10$4Se0Eqdv0Ay4nMJOu8LSReNDGtnIgrH1mgxaKr7vHhL.WBx/fGw7m', 'Phòng Văn hóa - Xã hội', '1980-04-19', '0365445956', 'phongvanhoaxahoi@nuicam.com', NULL, 2, 3, true, 'Phụ trách Văn hóa & Xã hội', '2025-08-28 21:29:31.870996+07');
INSERT INTO public.users VALUES (6, 'admin02', '064654652132', '$2a$10$u6pJeXRqlkIdBRphmqaeg.HU7adLI4BfGHBbngiNoKk4K6Bkjx9OK', 'Quản trị viên 02', NULL, NULL, NULL, NULL, 1, 8, true, '', '2025-08-28 21:26:13.319926+07');
INSERT INTO public.users VALUES (8, 'trungtamdichvutonghop', '065123123123', '$2a$10$lgu9KRfJnlUgrHIZBYxzN.HmydqWmLaPQquJ18Aelc/4p0.Qz/Z6u', 'Trung tâm Dịch vụ tổng hợp', NULL, '0365445216', 'trungtamdichvutonghop@nuicam.com', NULL, 2, 5, true, '', '2025-08-28 21:28:00.436182+07');
INSERT INTO public.users VALUES (7, 'trungtamphucvuhanhchinhcong', '065113123123', '$2a$10$2q3IKhOyhnyihuoqa5mOse7U0ZLahX5SIebq3L1A2wgYW9VvKbTU.', 'Trung tâm PVHCC', '1982-03-12', '0364985612', 'trungtamphucvuhanhchinhcong@nuicam.com', NULL, 2, 4, true, '', '2025-08-28 21:27:16.099056+07');
INSERT INTO public.users VALUES (14, 'apanhoa', '095654651231', '$2a$10$KgAI9YHC6JoJwO8n2J7KU.6vJr3sA4EJ9SFgjhxzXvUWPXo1JsG0K', 'Ấp An Hòa', '1977-05-05', '0954656665', 'apanhoa@nuicam.com', NULL, 10, 6, true, 'Ban ấp An Hòa, xã Núi Cấm, tỉnh An Giang', '2025-08-29 15:22:13.03928+07');
INSERT INTO public.users VALUES (15, 'vienchuc', '093284923849', '$2a$10$FOLBDdo6DuXqDFlCcsfH4eyeHTf6FrXN21.8DhWLZxc2gYp.DJFfy', 'Viên chức', NULL, '0948324239', 'vienchuc@nuicam.com', NULL, 7, 5, true, 'Test Ghi chú', '2025-08-29 16:15:59.838944+07');
INSERT INTO public.users VALUES (2, 'vanphongubnd', '000000000002', '$2a$10$SGEJD2ogAbiPzyYwiHv0k.wSnu2pcn0GuKoLccy9O/E7bomxbMNGu', 'Văn phòng HĐND và UBND', NULL, NULL, 'vanphongubnd@nuicam.com', NULL, 2, 1, true, '', '2025-08-28 16:17:57.148754+07');
INSERT INTO public.users VALUES (1, 'admin01', '000000000001', '$2a$10$B3mq0NJHv1byRd1HrNQ0EOrpndaNklWT1DAjYmeGXY.gPBMUCHN0u', 'Quản trị viên 01', '1997-01-01', '0329577500', 'admin@nuicam.com', NULL, 1, 8, true, '', '2025-08-28 16:15:57.366029+07');


--
-- TOC entry 5017 (class 0 OID 0)
-- Dependencies: 221
-- Name: departments_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.departments_id_seq', 11, true);


--
-- TOC entry 5018 (class 0 OID 0)
-- Dependencies: 225
-- Name: permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.permissions_id_seq', 10, true);


--
-- TOC entry 5019 (class 0 OID 0)
-- Dependencies: 219
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_id_seq', 1, false);


--
-- TOC entry 5020 (class 0 OID 0)
-- Dependencies: 230
-- Name: task_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.task_history_id_seq', 25, true);


--
-- TOC entry 5021 (class 0 OID 0)
-- Dependencies: 228
-- Name: tasks_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tasks_id_seq', 7, true);


--
-- TOC entry 5022 (class 0 OID 0)
-- Dependencies: 217
-- Name: user_logs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.user_logs_id_seq', 1, false);


--
-- TOC entry 5023 (class 0 OID 0)
-- Dependencies: 223
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 15, true);


--
-- TOC entry 4807 (class 2606 OID 16599)
-- Name: departments departments_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT departments_name_key UNIQUE (name);


--
-- TOC entry 4809 (class 2606 OID 16597)
-- Name: departments departments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.departments
    ADD CONSTRAINT departments_pkey PRIMARY KEY (id);


--
-- TOC entry 4819 (class 2606 OID 16637)
-- Name: permissions permissions_permission_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_permission_name_key UNIQUE (permission_name);


--
-- TOC entry 4821 (class 2606 OID 16635)
-- Name: permissions permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_pkey PRIMARY KEY (id);


--
-- TOC entry 4823 (class 2606 OID 16642)
-- Name: role_permissions role_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_pkey PRIMARY KEY (role_id, permission_id);


--
-- TOC entry 4803 (class 2606 OID 16586)
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- TOC entry 4805 (class 2606 OID 16588)
-- Name: roles roles_role_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_role_name_key UNIQUE (role_name);


--
-- TOC entry 4831 (class 2606 OID 16717)
-- Name: system_settings system_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.system_settings
    ADD CONSTRAINT system_settings_pkey PRIMARY KEY (key);


--
-- TOC entry 4827 (class 2606 OID 16684)
-- Name: task_history task_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_history
    ADD CONSTRAINT task_history_pkey PRIMARY KEY (id);


--
-- TOC entry 4829 (class 2606 OID 16699)
-- Name: task_supporters task_supporters_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_supporters
    ADD CONSTRAINT task_supporters_pkey PRIMARY KEY (task_id, user_id);


--
-- TOC entry 4825 (class 2606 OID 16664)
-- Name: tasks tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_pkey PRIMARY KEY (id);


--
-- TOC entry 4801 (class 2606 OID 16426)
-- Name: user_logs user_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_logs
    ADD CONSTRAINT user_logs_pkey PRIMARY KEY (id);


--
-- TOC entry 4811 (class 2606 OID 16614)
-- Name: users users_cccd_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_cccd_key UNIQUE (cccd);


--
-- TOC entry 4813 (class 2606 OID 16616)
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- TOC entry 4815 (class 2606 OID 16610)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 4817 (class 2606 OID 16612)
-- Name: users users_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_username_key UNIQUE (username);


--
-- TOC entry 4834 (class 2606 OID 16648)
-- Name: role_permissions role_permissions_permission_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_permission_id_fkey FOREIGN KEY (permission_id) REFERENCES public.permissions(id) ON DELETE CASCADE;


--
-- TOC entry 4835 (class 2606 OID 16643)
-- Name: role_permissions role_permissions_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id) ON DELETE CASCADE;


--
-- TOC entry 4838 (class 2606 OID 16685)
-- Name: task_history task_history_task_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_history
    ADD CONSTRAINT task_history_task_id_fkey FOREIGN KEY (task_id) REFERENCES public.tasks(id) ON DELETE CASCADE;


--
-- TOC entry 4839 (class 2606 OID 16690)
-- Name: task_history task_history_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_history
    ADD CONSTRAINT task_history_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 4840 (class 2606 OID 16700)
-- Name: task_supporters task_supporters_task_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_supporters
    ADD CONSTRAINT task_supporters_task_id_fkey FOREIGN KEY (task_id) REFERENCES public.tasks(id) ON DELETE CASCADE;


--
-- TOC entry 4841 (class 2606 OID 16705)
-- Name: task_supporters task_supporters_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.task_supporters
    ADD CONSTRAINT task_supporters_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 4836 (class 2606 OID 16670)
-- Name: tasks tasks_assignee_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_assignee_id_fkey FOREIGN KEY (assignee_id) REFERENCES public.users(id);


--
-- TOC entry 4837 (class 2606 OID 16665)
-- Name: tasks tasks_creator_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES public.users(id);


--
-- TOC entry 4832 (class 2606 OID 16622)
-- Name: users users_department_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_department_id_fkey FOREIGN KEY (department_id) REFERENCES public.departments(id) ON DELETE SET NULL;


--
-- TOC entry 4833 (class 2606 OID 16617)
-- Name: users users_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id);


-- Completed on 2025-08-30 16:31:52

--
-- PostgreSQL database dump complete
--

\unrestrict g3uQ2MaPLUItiyCc8jEHpG4xouUMCiB1DsC68rrhll1qhKZyRTDKgR02LYEOEXc

